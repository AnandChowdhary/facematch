function doCamera(){var e=_imageData.toDataURL("image/jpeg");$.ajax({url:"https://api.facematch.gq/api/match_faces_detailed",type:"POST",data:{imageURI:e,name:name},success:function(e){setTimeout(function(){document.querySelector(".bottom-bar div").style.display="block"},1),0==e.FaceMatches.length?(name="Unknown",accuracy="100%",document.querySelector(".linkedinlink").style.display="none"):(name=e.FaceMatches[0].Face.ExternalImageId.replace(/_/g," "),document.querySelector(".linkedinlink").style.display="block",accuracy=parseInt(e.FaceMatches[0].Face.Confidence)+"%"),age1=e.FaceDetails.AgeRange.High,age2=e.FaceDetails.AgeRange.Low,beard=e.FaceDetails.Beard.Value,gender=e.FaceDetails.Gender.Value,document.querySelector(".loader").style.display="none"},complete:function(){document.querySelector(".bottom-bar div").style.display="none"}})}function speakSentence(){var e="";e+="Unknown"==name?"There is an unknown person in the image whose age is between ":name+" is present in the image whose age is between ",e+=age2+" and "+age1,alert(e)}function putAPI(){var e=_imageData.toDataURL("image/jpeg"),t=prompt("Enter your full name");$.ajax({url:"https://api.facematch.gq/api/add_faces_crowd",type:"PUT",data:{imageURI:e,name:t},success:function(e){console.log(e)},complete:function(){console.log("request sent")}})}var brfv4Example={appId:"facematch",loader:{queuePreloader:null},imageData:{webcam:{stream:null},picture:{}},dom:{},gui:{},drawing:{},drawing3d:{t3d:{}},stats:{}},brfv4={locateFile:function(e){return"js/libs/brf/BRFv4_JS_trial.js.mem"}};brfv4Example.start=function(){brfv4Example.loader.preload(["js/libs/brf/BRFv4_JS_trial.js","https://webrtc.github.io/adapter/adapter-latest.js","js/libs/quicksettings/quicksettings.min.css","js/libs/quicksettings/quicksettings.js","js/libs/createjs/easeljs-0.8.2.min.js","js/libs/threejs/three.js","js/utils/BRFv4DOMUtils.js","js/utils/BRFv4DrawingUtils_CreateJS.js","js/utils/BRFv4Drawing3DUtils_ThreeJS.js","js/utils/BRFv4SetupWebcam.js","js/utils/BRFv4SetupPicture.js","js/utils/BRFv4SetupExample.js","js/utils/BRFv4PointUtils.js"],function(){brfv4Example.init("webcam")})},brfv4Example.trace=function(e,t){if("undefined"!=typeof window&&window.console){var a=(window.performance.now()/1e3).toFixed(3);t?window.console.error(a+": ",e):window.console.log(a+": ",e)}},function(){"use strict";var e=brfv4Example.loader;e.preload=function(t,a){function n(e){}function r(e){a&&a()}if(null===e.queuePreloader&&t){var o=e.queuePreloader=new createjs.LoadQueue(!0);o.on("progress",n),o.on("complete",r),o.loadManifest(t,!0)}},e.loadExample=function(t,a){function n(e){a&&a()}var r=e.queueExamples=new createjs.LoadQueue(!0);r.on("progress",onProgress),r.on("complete",n),r.loadManifest(t,!0)}}();var p=0;setInterval(function(){1==p&&(p=0)},5e3),function e(){"use strict";brfv4Example.initCurrentExample=function(e,t){e.init(t,t,brfv4Example.appId),setTimeout(function(){doCamera()},300)},brfv4Example.updateCurrentExample=function(e,t,a){e.update(t),a.clear();var n=e.getFaces(),r=new brfv4.Point,o=new brfv4.Point,c=brfv4.BRFv4PointUtils.setPoint,i=brfv4.BRFv4PointUtils.calcDistance,s=0;0==p&&(p=1);for(var l=0;l<n.length;l++){var u=n[l];if("state_face_detection"===u.state){var s=1;document.querySelector(".facebox")&&(document.querySelector(".facebox").style.display="none"),document.querySelector(".infofacebox")&&(document.querySelector(".infofacebox").style.display="none")}c(u.vertices,48,r),c(u.vertices,54,o);var d=i(r,o);c(u.vertices,39,o),c(u.vertices,42,r);var m=i(r,o),f=d/m;f-=1.4,f>.25&&(f=.25),f<0&&(f=0),f*=4,f<0&&(f=0),f>1&&(f=1);var g="neutral";f>.5&&(g="kinda happy"),f>.8&&(g="very happy"),document.querySelector(".smilingfac").innerHTML=g;var y=((255*(1-f)&255)<<16)+((255*f&255)<<8),b=document.querySelector(".facebox-"+l);b||(b=document.createElement("div"),b.classList.add("facebox"),b.classList.add("facebox-"+l),document.body.appendChild(b)),b.style.left=document.querySelector("#_drawing").getBoundingClientRect().x+u.bounds.x+"px",b.style.top=document.querySelector("#_drawing").getBoundingClientRect().y-20+u.bounds.y+"px",b.style.height=u.bounds.height+"px",b.style.width=u.bounds.width+"px",0===s&&(b.style.display="block"),document.querySelector("#name")&&(document.querySelector("#name").innerHTML=name),document.querySelector("#accuracy")&&(document.querySelector("#accuracy").innerHTML=accuracy),document.querySelector("#age1")&&(document.querySelector("#age1").innerHTML=age1),document.querySelector("#age2")&&(document.querySelector("#age2").innerHTML=age2),document.querySelector("#beard")&&(document.querySelector("#beard").innerHTML=beard),document.querySelector("#gender")&&(document.querySelector("#gender").innerHTML=gender);var v=name.split(" ")[0],w=name.split(" ")[1],S="https://www.linkedin.com/pub/dir/"+v+"/"+w;document.querySelector(".linkedinlink").setAttribute("href",S);var q=document.querySelector(".infofacebox-"+l);q||(q=document.createElement("div"),q.classList.add("infofacebox"),q.classList.add("infofacebox-"+l),document.body.appendChild(q)),q.innerHTML="Anand Chowdhary",q.style.left=document.querySelector("#_drawing").getBoundingClientRect().x+u.bounds.x+"px",q.style.top=document.querySelector("#_drawing").getBoundingClientRect().y+u.bounds.height+25+u.bounds.y+"px",0===s&&(q.style.display="block"),u.state!==brfv4.BRFState.FACE_TRACKING_START&&u.state!==brfv4.BRFState.FACE_TRACKING||(a.drawTriangles(u.vertices,u.triangles,!1,.5,y,.4),a.drawVertices(u.vertices,2,!1,y,.4))}}}(),window.onload=brfv4Example.start;var name="",accuracy="",age1="",age2="",beard="",gender="";